<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,300;0,400;0,700;0,900;1,300;1,400;1,700;1,900&display=swap" rel="stylesheet">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sensor Data Monitoring</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/raphael@2.3.0/raphael.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/justgage@1.3.5/justgage.min.js"></script>
    <style>
        body {
            font-family: 'Lato', sans-serif;
            text-align: center;
            margin: 50px;
        }
        table {
            width: 50%;
            margin: auto;
            border-collapse: collapse;
        }
        th, td {
            padding: 10px;
            border: 1px solid #ddd;
        }
        th {
            background-color: #f4f4f4;
        }
        .rectangle {
            margin: auto;
            width: 900px;
            background-color: lightgray;
            border-radius: 50px;
            align-items: center;
            justify-content: center;
            display: flex;
        }
        .rectangle2 {
            margin: auto;
            width: 900px;
            background-color: lightgray;
            border-radius: 50px;
            align-items: center;
            justify-content: center;
        }
        .circle {
            position:absolute;
            top:-10px;
            width:70px;
            height:70px;
            background-color: darkolivegreen;
            border-radius:50px;
            align-items: center;
            justify-content: center;
        }
        #date-info {
            font-family: 'Lato', sans-serif;
            font-weight: 700;
            font-size:15px;
            font-weight: 400;
        }
        div[id^="gauge"] {
        margin-top: 20px;
        margin-bottom: -40px;
        }
    </style>
</head>
<body>
    <div class="rectangle2" style="position: relative; height: 1600px; flex-direction: column; background-color: white; gap: 50px;">
        <div class="rectangle" style="width: 300px; position:relative; justify-content: center; background-color: white; box-shadow: 0px 0px 10px gray;">
            <img src="logo_ugm.png" alt="Logo UGM" style="width:50px;height:auto; padding:10px;">
            <img src="logo_ugm.png" alt="Logo UGM" style="width:50px;height:auto; padding:10px;">
            <img src="logo_ugm.png" alt="Logo UGM" style="width:50px;height:auto; padding:10px;">
        </div>

        <div class="rectangle2" style="text-align: justify;">
            <h1 style="padding: 30px; height: 10px; float: left; font-size: px; color:darkolivegreen; text-shadow: 1px 1px 2px gray;">Tree Algae</h1>
            <p style="font-size: 20px; font-weight: 400; padding: 20px;">
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut vehicula in augue vitae euismod. Sed posuere sem ac enim vehicula, sed tristique mauris varius. Proin nec ultrices odio. Vestibulum gravida hendrerit velit quis tempus. Nulla velit sem, sollicitudin sit amet tincidunt nec, eleifend quis mauris. 
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut vehicula in augue vitae euismod. Sed posuere sem ac enim vehicula, sed tristique mauris varius. Proin nec ultrices odio. Vestibulum gravida hendrerit velit quis tempus. Nulla velit sem, sollicitudin sit amet tincidunt nec, eleifend quis mauris. 
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut vehicula in augue vitae euismod. Sed posuere sem ac enim vehicula, sed tristique mauris varius. Proin nec ultrices odio. Vestibulum gravida hendrerit velit quis tempus. Nulla velit sem, sollicitudin sit amet tincidunt nec, eleifend quis mauris. 
            </p>
        </div>
        
        <div class="rectangle" style="position: relative; flex-direction: column; background-color: white;">
            <div class="rectangle" style="position: relative; height: 350px; flex-direction: row; background-color: white;">
                <div class="rectangle" style="width: 250px; position: relative; background-color:white; border-radius:10px; border-color: mediumseagreen;border-width:5px;border-style: solid; justify-content: center; flex-direction: column;">
                    <div class="rectangle" style="width: 170px; height: 50px; position: absolute; left:-40px; top:-30px; box-shadow: 5px 5px 5px gray; text-align: left; padding-left:80px;">
                        <div class="circle" style="left: 0px; box-shadow: 5px 0px 5px gray; justify-content: center; align-items: center;">
                            <img src="turbidity.svg" alt="Turbidity" style="width:50px;height:auto; padding:10px;">
                        </div>
                        <p style="font-size: 20px; font-weight: 700;">Turbidity (NTU)</p>
                    </div>
                    <div id="gauge1" style="width:200px; height:160px;"></div>
                    <p style="padding-left: 10px; padding-right: 10px; text-align: justify; font-size: 15px;">
                        Kejernihan suatu cairan, terutama air, yang dipengaruhi oleh partikel-partikel tersuspensi yang menghamburkan dan menyerap cahaya.
                    </p>
                </div>

                <div class="rectangle" style="width: 250px; position: relative; background-color:white; border-radius:10px; border-color: darkolivegreen;border-width:5px;border-style: solid; justify-content: center; flex-direction: column;">
                    <div class="rectangle" style="width: 110px; height: 50px; position: absolute; left:-40px; top:-30px; box-shadow: 5px 5px 5px gray; text-align: left; padding-left:80px;">
                        <div class="circle" style="left: 0px; box-shadow: 5px 0px 5px gray; justify-content: center; align-items: center; background-color: mediumseagreen;">
                            <img src="pH.svg" alt="pH" style="width:50px;height:auto; padding:10px;">
                        </div>
                        <p style="font-size: 20px; font-weight: 700;">pH Scale</p>
                    </div>
                    <div id="gauge2" style="width:200px; height:160px;"></div>
                    <p style="padding-left: 10px; padding-right: 10px; text-align: justify; font-size: 15px;">
                        Tingkat keasaman atau kebasaan suatu zat, dalam hal ini air. pH 7 bersifat netral, pH kurang dari 7 bersifat asam, dan pH lebih dari 7 bersifat basa atau alkali.
                    </p>
                </div>
                
                <div class="rectangle" style="width: 250px; position: relative; background-color:white; border-radius:10px; border-color: mediumseagreen;border-width:5px;border-style: solid; justify-content: center; flex-direction: column;">
                    <div class="rectangle" style="width: 250px; height: 50px; position: absolute; left:-40px; top:-30px; box-shadow: 5px 5px 5px gray; text-align: left; padding-left:80px;">
                        <div class="circle" style="left: 0px; box-shadow: 5px 0px 5px gray; justify-content: center; align-items: center;">
                            <img src="dissolved oxygen.svg" alt="Dissolved Oxygen" style="width:50px;height:auto; padding:10px;">
                        </div>
                        <p style="font-size: 20px; font-weight: 700;">Dissolved Oxygen (mg/L)</p>
                    </div>
                    <div id="gauge3" style="width:200px; height:160px;"></div>
                    <p style="padding-left: 10px; padding-right: 10px; text-align: justify; font-size: 15px;">
                        Oksigen terlarut dalam air yang digunakan dalam proses metabolisme alga. Maka, semakin besar ukuran ini, semakin baik pula kualitas airnya.
                    </p>
                </div>
            </div>

            <div class="rectangle" style="position: relative; height: 300px; flex-direction: row; background-color: white; width: 700px;">
                <div class="rectangle" style="width: 250px; position: relative; background-color:white; border-radius:10px; border-color: darkolivegreen;border-width:5px;border-style: solid; justify-content: center; flex-direction: column;">
                    <div class="rectangle" style="width: 250px; height: 50px; position: absolute; left:-40px; top:-30px; box-shadow: 5px 5px 5px gray; text-align: left; padding-left:80px;">
                        <div class="circle" style="left: 0px; box-shadow: 5px 0px 5px gray; justify-content: center; align-items: center; background-color: mediumseagreen;">
                            <img src="water temp.svg" alt="Water Temperature" style="width:50px;height:auto; padding:10px;">
                        </div>
                        <p style="font-size: 20px; font-weight: 700;">Water Temperature (°C)</p>
                    </div>
                    <div id="gauge4" style="width:200px; height:160px;"></div>
                    <p style="padding-left: 10px; padding-right: 10px; text-align: justify; font-size: 15px;">
                        Suhu air yang memengaruhi pertumbuhan alga. Umumnya, jangkauan suhu yang optimal terletak pada 15–27°C.
                    </p>
                </div>

                <div class="rectangle" style="width: 250px; position: relative; background-color:white; border-radius:10px; border-color: mediumseagreen;border-width:5px;border-style: solid; justify-content: center; flex-direction: column;">
                    <div class="rectangle" style="width: 230px; height: 50px; position: absolute; left:-40px; top:-30px; box-shadow: 5px 5px 5px gray; text-align: left; padding-left:80px;">
                        <div class="circle" style="left: 0px; box-shadow: 5px 0px 5px gray; justify-content: center; align-items: center;">
                            <img src="co2.svg" alt="Carbon Dioxide" style="width:50px;height:auto; padding:10px;">
                        </div>
                        <p style="font-size: 20px; font-weight: 700;">Carbon Dioxide (ppm)</p>
                    </div>
                    <div id="gauge5" style="width:200px; height:160px;"></div>
                    <p style="padding-left: 10px; padding-right: 10px; text-align: justify; font-size: 15px;">
                        Konsentrasi atau proporsi gas CO₂ yang terdapat dalam suatu volume udara atau media tertentu, dalam konteks ini adalah air.
                    </p>
                </div>
            </div>
        </div>

        <div class="rectangle" style="position: relative;">
                weather dan terakhir diperbarui
        </div>

    </div>

        <!-- <div class="rectangle" style="width: 300px; position:relative; justify-content: center; background-color: white; box-shadow: 0px 0px 10px gray;">
            <img src="logo_ugm.png" alt="Logo UGM" style="width:50px;height:auto; padding:10px;">
            <img src="logo_ugm.png" alt="Logo UGM" style="width:50px;height:auto; padding:10px;">
            <img src="logo_ugm.png" alt="Logo UGM" style="width:50px;height:auto; padding:10px;">
        </div>
        <div class="rectangle" style="position: absolute; right:10px; top:50px; background-color: white;">
            <p style="font-size:15px; font-weight: 400;">Terakhir diperbarui: <br> <strong id='date-info' >Fetching...</strong></p>
        </div>
        <h1 style="position:absolute; top:175px; font-size: 48px; color:darkolivegreen; text-shadow: 1px 1px 2px gray;">Tree Algae</h1>
        <div class="rectangle" style="top:375px; width: 350px;background-color: white; padding-left: 0px; text-align: justify;">
            <p style="font-size: 20px; font-weight: 400;">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut vehicula in augue vitae euismod. Sed posuere sem ac enim vehicula, sed tristique mauris varius. Proin nec ultrices odio. Vestibulum gravida hendrerit velit quis tempus. Nulla velit sem, sollicitudin sit amet tincidunt nec, eleifend quis mauris. 
            </p>
        </div> -->



            <!-- <div class="rectangle" style=" width: 490px; right:10px; top:600px; box-shadow: -5px 5px 5px gray;">
            <div class="circle" style="right:0px; box-shadow: -5px 0px 5px gray; background-color: mediumseagreen;"></div>
            <p style="font-size: 30px; font-weight: 700; position:absolute; right:120px;">Dissolved Oxygen (mg/L)</p>
        </div> -->
            <!-- </div>
            <div class="rectangle" style="width: 450px;right:10px; top:1000px; box-shadow: -5px 5px 5px gray;">
            <div class="circle" style="right:0px; box-shadow: -5px 0px 5px gray;"></div>
            <p style="font-size: 30px; font-weight: 700; position:absolute; right:120px;">Carbon Dioxide (ppm)</p>
        </div> -->
            <!-- <div class="rectangle" style="width: 250px;left:10px; top:600px; box-shadow: 5px 5px 5px gray; text-align: left; padding-left:120px;">
            <div class="circle" style="left:0px; box-shadow: 5px 0px 5px gray;"></div>
            <p style="font-size: 30px; font-weight: 700;">Turbidity (NTU)</p>
        </div> -->
            <!-- <div class="rectangle" style="width: 350px; left:10px; top:1000px; box-shadow: 5px 5px 5px gray; text-align: left; padding-left:120px;">
            <div class="circle" style="left:0px; box-shadow: 5px 0px 5px gray; background-color: mediumseagreen;"></div>
            <p style="font-size: 30px; font-weight: 700;">Water Temperature (°C)</p>
        </div> -->
        <!-- <h2>Sensor Data Monitoring</h2>
        <p>Terakhir diperbarui: <strong id='date-info'>Fetching...</strong></p> -->

        <!-- <table>
            <tr>
                <th>Parameter</th>
                <th>Value</th>
            </tr>
            <tr>
                <td>Turbidity (NTU)</td>
                <td id="turbidity"></td>
            </tr>
            <tr>
                <td>pH Level</td>
                <td id="ph"></td>
            </tr>
            <tr>
                <td>Dissolved Oxygen (DO) (mg/L)</td>
                <td id="do">Loading...</td>
            </tr>
            <tr>
                <td>CO₂ (ppm)</td>
                <td id="co2">Loading...</td>
            </tr>
            <tr>
                <td>Water Temperature (°C)</td>
                <td id="water_temp">Loading...</td>
            </tr>
            <tr>
                <td>Air Temperature (°C)</td>
                <td id="air_temp">Loading...</td>
            </tr>
            <tr>
                <td>Air Humidity (%)</td>
                <td id="air_hum">Loading...</td>
            </tr>
        </table> -->

    <script>
        function fetchData() {
            $.ajax({
                url: "https://punyadaffa.my.id/treealgae/get_update_data.php",
                method: "GET",
                dataType: "json",
                success: function (data) {
                    if (data.error) {
                        $("#turbidity").text("No data");
                        $("#ph").text("No data");
                        $("#do").text("No data");
                        $("#co2").text("No data");
                        $("#water_temp").text("No data");
                        $("#air_temp").text("No data");
                        $("#air_hum").text("No data");
                        $("#latest_time").text("No data");
                    } else {
                        $("#turbidity").text(data.turbidity + " NTU");
                        $("#ph").text(data.ph);
                        $("#do").text(data.do + " mg/L");
                        $("#co2").text(data.co2 + " ppm");
                        $("#water_temp").text(data.water_temp + " °C");
                        $("#air_temp").text(data.air_temp + " °C");
                        $("#air_hum").text(data.air_hum + " %");
                        $("#latest_time").text(data.waktu);
                    }
                },
                error: function () {
                    console.error("Failed to fetch data.");
                }
            });
        }
                                         
        $(document).ready(function () {
            fetchData(); // Initial fetch
            setInterval(fetchData, 5000); // Fetch every 5 seconds
        });

        const defaultGaugeConfig = {
        min: 0,
        max: 100,
        pointer: true,
        gaugeColor: "#eee",
        };

        // Use it for multiple gauges
        const g1 = new JustGage({
        ...defaultGaugeConfig,
        id: "gauge1",
        value: 85,
        title: "Turbidity",
        levelColors: ["#00ff00","#ffcc00","#ff0000"],
        decimals: 2,
        formatNumber: false
        });
    
        const g2 = new JustGage({
        ...defaultGaugeConfig,
        id: "gauge2",
        value: 5.73,
        title: "pH",
        min: 0,
        max: 14,
        levelColors: ["#ff0000","#ffcc00","#00ff00","#0000ff","#cc00ff"],
        decimals: 2,
        formatNumber: false,
        });

        const g3 = new JustGage({
        ...defaultGaugeConfig,
        id: "gauge3",
        value: 6.43,
        max: 10,
        levelColors: ["#ff0000","#ffcc00","#00ff00"],
        title: "Dissolved Oxygen",
        decimals: 2,
        formatNumber: false
        });

        const g4 = new JustGage({
        ...defaultGaugeConfig,
        id: "gauge4",
        value: 47,
        min: 10,
        max: 50,
        levelColors: ["#ff0000","#ffcc00","#00ff00","#ffcc00","#ff0000"],
        title: "Water Temperature",
        decimals: 2,
        formatNumber: false
        });

        const g5 = new JustGage({
        ...defaultGaugeConfig,
        id: "gauge5",
        value: 670.93,
        min: 400,
        max: 2000,
        levelColors: ["#00ff00","#ffcc00","#ff0000"],
        title: "Carbon Dioxide",
        decimals: 2,
        formatNumber: false
        });

        function updateGauges() {
            g1.refresh(Math.floor(Math.random() * 14));
            g2.refresh(Math.floor(Math.random() * 14));
        } 
    </script>

</body>
</html>